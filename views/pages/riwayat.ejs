<!DOCTYPE html>
<html>
    <%- include('../reusables/head.ejs') %>
    </head>
    <%- include('../reusables/navbar.ejs') %>
    

    <script>
        function showComment(){
                    var report = document.getElementById ("commentBlock");
                    report.classList.toggle("inv");
                }
    </script>

    <div class="addCommentBlock inv" id="commentBlock">
        <form action="add ke komen">
        <div id="exit" onclick="showComment()"><i class="fa-solid fa-xmark"></i></div>
        <h3 style="margin-bottom: 0;">Rating</h3>
            <div class="star">
                <input type="radio" name="starRate" id="star5" value="5">
                <label for="star5"></label>
                <input type="radio" name="starRate" id="star4" value="4">
                <label for="star4"></label>
                <input type="radio" name="starRate" id="star3" value="3">
                <label for="star3"></label>
                <input type="radio" name="starRate" id="star2" value="2">
                <label for="star2"></label>
                <input type="radio" name="starRate" id="star1" value="1">
                <label for="star1"></label>
            </div>
            <h3>Komentar</h3>
            <textarea name="comment" id="commentText" cols="30" rows="10"></textarea>
            <button type="submit">Beri komentar</button>
        </form>
    </div>

    <div class="in">
        <h1>Riwayat Pembelian</h1>
        <div style="overflow: hidden;;">
            <div class="historyTitle">
                <div class="historyContainer" id="product" style="height: max-content;">
                    <h2>Produk</h2>
                </div>
                <div class="historyContainer" id="quantity">
                    <h2>Kuantitas</h2>
                </div>
                <div class="historyContainer" id="price" style="width: 13vw;">
                    <h2>Harga</h2>
                </div>
                <div class="historyContainer" id="condition">
                    <h2>Kondisi</h2>
                </div>
            </div>
            <ul class="historyLine">
                <% cart.forEach((product)=>{ %>
                <li class="history">
                    <div class="historyContainer" id="product">
                        <div id="historyImg">
                            <img src="/uploads/<%= product.productImgURL %>" alt="Gambar produk">
                        </div>
                        <div id="historyProduct">
                            <div><%- product.productName %></h3>
                            </div>
                            <div id="boughtDate">
                            <p>dibeli :</p><p><%- product.date.toDateString() %></p>
                            </div>
                            <div id="addReview">
                            <p onclick="showComment()">Tambah Komentar</p>
                            </div>
                        </div>
                    </div>
                    <div class="historyContainer" id="quantity">
                        <p><%- product.amount %> Kg</p>
                    </div>
                    <div class="historyContainer" id="price">
                        <p>Rp <%- (product.productPrice*product.amount).toFixed(2).replace('.',',').replace(/\d(?=(\d{3})+\,)/g, '$&.') %></p>
                    </div>
                    <div class="historyContainer" id="condition">
                        <p><%- product.status %></p>
                    </div>
                </li>
                <% }) %>
            </ul>
        </div>
    </div>

</html>
